!function(a){"use strict";var b=a("#vc_ui-panel-edit-element");b.on("mpc.render",function(){if("mpc_interactive_image"==b.attr("data-vc-shortcode")){var c=a('.vc_shortcode-param[data-vc-shortcode-param-name="preview_divider"] .edit_form_line'),d=a('<button class="mpc-vc-button button mpc-default mpc-preview">'+_mpc_lang.mpc_interactive_image.preview+"</button>"),e=a('<div class="mpc-coords__preview" />'),f=[];c.append(d),d.after(e).after("<br>"),f=vc.shortcodes.where({parent_id:vc.active_panel.model.attributes.id}),d.on("click",function(){var c=b.find(".wpb_vc_param_value.background_image").val();e.css("max-width",b.width()).html(""),""==c?e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_background+"</p>"):0==f.length?e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_hotspots+"</p>"):a.post(ajaxurl,{action:"mpc_interactive_image_get_image",image_id:c},function(b){if("error"==b)return void e.append('<p class="mpc-error">'+_mpc_lang.mpc_interactive_image.no_background+"</p>");e.append(b).addClass("mpc-loaded");for(var c=0;c<f.length;c++){var d=a('<div class="mpc-coords__point" />'),g=f[c].attributes.params.position.split("||");2==g.length&&(g[0]=isNaN(parseFloat(g[0]))?50:parseFloat(g[0]),g[1]=isNaN(parseFloat(g[1]))?50:parseFloat(g[1]),d.css({left:g[0]+"%",top:g[1]+"%"}),e.append(d))}})})}})}(jQuery);